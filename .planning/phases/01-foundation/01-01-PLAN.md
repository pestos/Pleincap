---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - next.config.mjs
  - tsconfig.json
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Next.js 15.2.3+ is installed and the dev server starts without errors"
    - "React 19 and React DOM 19 are installed"
    - "All existing pages render correctly after upgrade"
    - "next.config.mjs exists with withPayload-ready structure"
  artifacts:
    - path: "package.json"
      provides: "Next.js 15+ and React 19 dependencies"
      contains: "next.*15"
    - path: "next.config.mjs"
      provides: "Next.js configuration file for ESM compatibility"
      min_lines: 3
  key_links:
    - from: "package.json"
      to: "next.config.mjs"
      via: "Next.js reads config on startup"
      pattern: "next\\.config"
---

<objective>
Upgrade the project from Next.js 14 / React 18 to Next.js 15.2.3+ / React 19, which is a hard prerequisite for Payload CMS 3.0 installation.

Purpose: Payload CMS 3.0 requires Next.js 15.2.3+ minimum. The current project uses Next.js 14.0.0 and React 18.3.1. This upgrade must complete before any Payload packages can be installed.

Output: A working Next.js 15 project with React 19, all existing pages functional, and a next.config.mjs ready for Payload integration.
</objective>

<execution_context>
@/Users/fredericgueirard/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fredericgueirard/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@package.json
@tsconfig.json
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade Next.js to 15.x and React to 19.x</name>
  <files>package.json, package-lock.json, next.config.mjs, tsconfig.json, src/app/layout.tsx</files>
  <action>
1. **Upgrade core dependencies:**
   ```bash
   npm install next@latest react@latest react-dom@latest @types/react@latest @types/react-dom@latest eslint-config-next@latest
   ```
   This should install Next.js 15.x, React 19.x, React DOM 19.x.

2. **Verify versions after install:**
   - `next` must be >= 15.2.3
   - `react` and `react-dom` must be >= 19.0.0
   - If versions are lower, install specific versions: `npm install next@15.2.3 react@19 react-dom@19`

3. **Create `next.config.mjs`** at project root (no next.config file currently exists):
   ```javascript
   /** @type {import('next').NextConfig} */
   const nextConfig = {
     images: {
       remotePatterns: [
         { protocol: 'https', hostname: '**.plein-cap.com' },
         { protocol: 'https', hostname: 'images.unsplash.com' },
         { protocol: 'https', hostname: '**.googleusercontent.com' },
       ],
     },
   }

   export default nextConfig
   ```
   Use `.mjs` extension for ESM compatibility (required by Payload later). The `images.remotePatterns` preserves existing external image loading patterns found in the codebase.

4. **Check tsconfig.json:** The existing config should work with Next.js 15. No changes needed unless the dev server reports issues.

5. **Check for breaking changes in existing code:**
   - The codebase does NOT use `cookies()`, `headers()`, or `draftMode()` (verified by grep), so no async API migration needed.
   - The codebase does NOT use `useSearchParams` or `useParams`, so no Suspense boundary wrapping needed.
   - Framer Motion 12.23.22 should be compatible with React 19 (it was released after React 19 stable).

6. **Test the upgrade:**
   ```bash
   npm run build
   ```
   The build must complete without errors. If there are TypeScript errors related to React 19 types, fix them (most common: `children` prop no longer implicitly included in FC type - but this project uses explicit children typing in layout.tsx which is fine).

7. **Start dev server and verify:**
   ```bash
   npm run dev
   ```
   Confirm the dev server starts on port 3000 without errors.
  </action>
  <verify>
    - `npm run build` completes without errors
    - `npx next --version` shows 15.x (>= 15.2.3)
    - `npm ls react` shows react@19.x
    - `npm run dev` starts successfully
    - Visit http://localhost:3000 and verify home page loads
  </verify>
  <done>
    - Next.js >= 15.2.3 installed
    - React and React DOM >= 19.0.0 installed
    - `next.config.mjs` exists at project root
    - `npm run build` succeeds
    - Dev server starts and serves existing pages
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes with exit code 0
2. `npx next --version` outputs version >= 15.2.3
3. `npm ls react react-dom` shows versions >= 19.0.0
4. `ls next.config.mjs` confirms config file exists
5. Dev server starts without errors on port 3000
</verification>

<success_criteria>
- Next.js 15.2.3+ and React 19 are installed as project dependencies
- The build succeeds and dev server runs without errors
- next.config.mjs exists with ESM-compatible configuration
- All existing functionality is preserved (no regressions)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
